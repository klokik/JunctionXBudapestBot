<!doctype html>
<html lang="en">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://unpkg.com/bootstrap@4.3.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://unpkg.com/bootstrap-vue@2.0.4/dist/bootstrap-vue.css" />
<script src="https://unpkg.com/babel-polyfill@6.26.0/dist/polyfill.min.js"></script>
<script src="https://unpkg.com/vue@2.6.10/dist/vue.min.js"></script>
<script src="https://unpkg.com/bootstrap-vue@2.0.4/dist/bootstrap-vue.js"></script>
<link href='http://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>
<!-- <link rel="stylesheet" href="linkedincss.css" /> -->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>



<meta charset="UTF-8">

<head>
    <!-- <link href="grayscale.css" rel="stylesheet"> -->


</head>

<body id="page-top">
    <div id="app">
        <b-container class="p-5" style="height: 100%">

            <!-- Intro (not logged in) -->
            <div v-if="loginstage == 1">

                <h3 class="text-center">Job Interview Helper</h3>
                <p>This service helps you to pass your job interview.</p>
                <p>How it works: you need to login with your LinkedIn account, the service parses your profile and generates audio that you could speak, when answering questions of the real interviewers.</p>
                <p>To continue please log in with your LinkedIn account:</p>
                <p>names you can use: bernd, hanka, lee, martin, lucie, tommy, yuri</p>

                <div class="col text-center">

                    <b-button v-on:click="loginstage = 2">Login with LinkedIn</b-button>
                    <!-- <a href="linkedinlogin.html" class="btn btn-info" role="button">Login with LinkedIn</a> -->

                </div>
            </div>

            <!-- Linkedin login -->
            <div v-else-if="loginstage == 2">

                <link rel="stylesheet" href="linkedincss.css" />

                <main class="app__content" role="main">
                    <div class="flavor">
                        <div class="header__logo">
                            <h2 class="in__logo">LinkedIn</h2>
                            <li-icon aria-hidden="true" type="linkedin-logo" alt="LinkedIn" size="21dp" color="brand"><svg preserveAspectRatio="xMinYMin meet" focusable="false"><g class="scaling-icon" style="fill-opacity: 1"><defs></defs><g class="logo-21dp"><g class="dpi-1"><g class="inbug" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M19.479,0 L1.583,0 C0.727,0 0,0.677 0,1.511 L0,19.488 C0,20.323 0.477,21 1.333,21 L19.229,21 C20.086,21 21,20.323 21,19.488 L21,1.511 C21,0.677 20.336,0 19.479,0" class="bug-text-color" fill="#FFFFFF" transform="translate(63.000000, 0.000000)"></path><path d="M82.479,0 L64.583,0 C63.727,0 63,0.677 63,1.511 L63,19.488 C63,20.323 63.477,21 64.333,21 L82.229,21 C83.086,21 84,20.323 84,19.488 L84,1.511 C84,0.677 83.336,0 82.479,0 Z M71,8 L73.827,8 L73.827,9.441 L73.858,9.441 C74.289,8.664 75.562,7.875 77.136,7.875 C80.157,7.875 81,9.479 81,12.45 L81,18 L78,18 L78,12.997 C78,11.667 77.469,10.5 76.227,10.5 C74.719,10.5 74,11.521 74,13.197 L74,18 L71,18 L71,8 Z M66,18 L69,18 L69,8 L66,8 L66,18 Z M69.375,4.5 C69.375,5.536 68.536,6.375 67.5,6.375 C66.464,6.375 65.625,5.536 65.625,4.5 C65.625,3.464 66.464,2.625 67.5,2.625 C68.536,2.625 69.375,3.464 69.375,4.5 Z" class="background" fill="#0073B0"></path></g><g class="linkedin-text"><path d="M60,18 L57.2,18 L57.2,16.809 L57.17,16.809 C56.547,17.531 55.465,18.125 53.631,18.125 C51.131,18.125 48.978,16.244 48.978,13.011 C48.978,9.931 51.1,7.875 53.725,7.875 C55.35,7.875 56.359,8.453 56.97,9.191 L57,9.191 L57,3 L60,3 L60,18 Z M54.479,10.125 C52.764,10.125 51.8,11.348 51.8,12.974 C51.8,14.601 52.764,15.875 54.479,15.875 C56.196,15.875 57.2,14.634 57.2,12.974 C57.2,11.268 56.196,10.125 54.479,10.125 L54.479,10.125 Z" fill="#000000"></path><path d="M47.6611,16.3889 C46.9531,17.3059 45.4951,18.1249 43.1411,18.1249 C40.0001,18.1249 38.0001,16.0459 38.0001,12.7779 C38.0001,9.8749 39.8121,7.8749 43.2291,7.8749 C46.1801,7.8749 48.0001,9.8129 48.0001,13.2219 C48.0001,13.5629 47.9451,13.8999 47.9451,13.8999 L40.8311,13.8999 L40.8481,14.2089 C41.0451,15.0709 41.6961,16.1249 43.1901,16.1249 C44.4941,16.1249 45.3881,15.4239 45.7921,14.8749 L47.6611,16.3889 Z M45.1131,11.9999 C45.1331,10.9449 44.3591,9.8749 43.1391,9.8749 C41.6871,9.8749 40.9121,11.0089 40.8311,11.9999 L45.1131,11.9999 Z" fill="#000000"></path><polygon fill="#000000" points="38 8 34.5 8 31 12 31 3 28 3 28 18 31 18 31 13 34.699 18 38.241 18 34 12.533"></polygon><path d="M16,8 L18.827,8 L18.827,9.441 L18.858,9.441 C19.289,8.664 20.562,7.875 22.136,7.875 C25.157,7.875 26,9.792 26,12.45 L26,18 L23,18 L23,12.997 C23,11.525 22.469,10.5 21.227,10.5 C19.719,10.5 19,11.694 19,13.197 L19,18 L16,18 L16,8 Z" fill="#000000"></path><path d="M11,18 L14,18 L14,8 L11,8 L11,18 Z M12.501,6.3 C13.495,6.3 14.3,5.494 14.3,4.5 C14.3,3.506 13.495,2.7 12.501,2.7 C11.508,2.7 10.7,3.506 10.7,4.5 C10.7,5.494 11.508,6.3 12.501,6.3 Z" fill="#000000"></path><polygon fill="#000000" points="3 3 0 3 0 18 9 18 9 15 3 15"></polygon></g></g><g class="dpi-gt1" transform="scale(0.4375)"><g class="inbug" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M44.5235,0 L3.6185,0 C1.6625,0 0.0005,1.547 0.0005,3.454 L0.0005,44.545 C0.0005,46.452 1.6625,48 3.6185,48 L44.5235,48 C46.4825,48 48.0005,46.452 48.0005,44.545 L48.0005,3.454 C48.0005,1.547 46.4825,0 44.5235,0" class="bug-text-color" fill="#FFFFFF" transform="translate(143.000000, 0.000000)"></path><path d="M187.5235,0 L146.6185,0 C144.6625,0 143.0005,1.547 143.0005,3.454 L143.0005,44.545 C143.0005,46.452 144.6625,48 146.6185,48 L187.5235,48 C189.4825,48 191.0005,46.452 191.0005,44.545 L191.0005,3.454 C191.0005,1.547 189.4825,0 187.5235,0 Z M162,18 L168.5,18 L168.5,21.266 C169.437,19.388 171.838,17.7 175.445,17.7 C182.359,17.7 184,21.438 184,28.297 L184,41 L177,41 L177,29.859 C177,25.953 176.063,23.75 173.68,23.75 C170.375,23.75 169,26.125 169,29.859 L169,41 L162,41 L162,18 Z M150,41 L157,41 L157,18 L150,18 L150,41 Z M158,10.5 C158,12.985 155.985,15 153.5,15 C151.015,15 149,12.985 149,10.5 C149,8.015 151.015,6 153.5,6 C155.985,6 158,8.015 158,10.5 Z" class="background" fill="#0073B0"></path></g><g class="linkedin-text"><path d="M136,41 L130,41 L130,37.5 C128.908,39.162 125.727,41.3 122.5,41.3 C115.668,41.3 111.2,36.975 111.2,30 C111.2,23.594 114.951,17.7 121.5,17.7 C124.441,17.7 127.388,18.272 129,20.5 L129,7 L136,7 L136,41 Z M123.25,23.9 C119.691,23.9 117.9,26.037 117.9,29.5 C117.9,32.964 119.691,35.2 123.25,35.2 C126.81,35.2 129.1,32.964 129.1,29.5 C129.1,26.037 126.81,23.9 123.25,23.9 L123.25,23.9 Z" fill="#000000"></path><path d="M108,37.125 C105.722,40.02 101.156,41.3 96.75,41.3 C89.633,41.3 85.2,36.354 85.2,29 C85.2,21.645 90.5,17.7 97.75,17.7 C103.75,17.7 108.8,21.917 108.8,30 C108.8,31.25 108.6,32 108.6,32 L92,32 L92.111,32.67 C92.51,34.873 94.873,36 97.625,36 C99.949,36 101.689,34.988 102.875,33.375 L108,37.125 Z M101.75,27 C101.797,24.627 99.89,22.7 97.328,22.7 C94.195,22.7 92.189,24.77 92,27 L101.75,27 Z" fill="#000000"></path><polygon fill="#000000" points="63 7 70 7 70 27 78 18 86.75 18 77 28.5 86.375 41 78 41 70 30 70 41 63 41"></polygon><path d="M37,18 L43,18 L43,21.375 C43.947,19.572 47.037,17.7 50.5,17.7 C57.713,17.7 59,21.957 59,28.125 L59,41 L52,41 L52,29.625 C52,26.969 52.152,23.8 48.5,23.8 C44.8,23.8 44,26.636 44,29.625 L44,41 L37,41 L37,18 Z" fill="#000000"></path><path d="M29.5,6.125 C31.813,6.125 33.875,8.189 33.875,10.5 C33.875,12.811 31.813,14.875 29.5,14.875 C27.19,14.875 25.125,12.811 25.125,10.5 C25.125,8.189 27.19,6.125 29.5,6.125 L29.5,6.125 Z M26,41 L33,41 L33,18 L26,18 L26,41 Z" fill="#000000"></path><polygon fill="#000000" points="0 7 7 7 7 34 22 34 22 41 0 41"></polygon></g></g></g></g></svg></li-icon>
                            <mark class="normal-badge hidden"><abbr title="You have unseen notifications" role="alert"></abbr></mark>
                        </div>
                        <div class="header__content ">
                            <h1 class="header__content__heading">Welcome to LinkedIn</h1>
                            <p class="header__content__subheading">Don&#39;t miss your next opportunity. Sign in to stay updated on your professional world.</p>
                        </div>
                        <form method="post" class="login__form" action="#" novalidate><input type="hidden" name="csrfToken" value="ajax:6325016113365964379" /><code id="login_form_validation_error_username" style="display: none;"><!--"Please enter a valid username"--></code><code id="consumer_login__text_plain__invalid_username"
                                style="display: none;"><!--"Hmm, we don&#39;t recognize that email. Please try again."--></code><code id="consumer_login__text_plain__large_username" style="display: none;"><!--"Email or phone number must be between 3 to 128 characters"--></code>
                            <code id="consumer_login__text_plain__invalid_username_with_phone_v2" style="display: none;">
                                            <!--"Hmm, we donâ€™t recognize that phone number. Please try again"-->
                                            </code><code id="consumer_login__text_plain__no_username" style="display: none;"><!--"Please enter an email address or phone number"--></code>
                            <div class="form__input--floating"><input id="username" name="session_key" type="text" aria-describedby="error-for-username" required validation="email|tel" autofocus aria-label="Email or Phone" v-model="user" /><label class="form__label--floating" for="username"
                                    aria-hidden="true">Email or Phone</label>
                                <div error-for="username" id="error-for-username" class="form__label--error  hidden" role="alert" aria-live="assertive"></div>
                            </div><code id="domainSuggestion" style="display: none;"><!--false--></code><input type="hidden" name="ac" value="0" /><input type="hidden" name="sIdString" value="accde527-0701-442c-9a8c-6f2c109dfc1b" /><input type="hidden" name="controlId"
                                value="d_checkpoint_lg_consumerLogin_oauth-login_submit_button" /><input type="hidden" name="parentPageKey" value="d_checkpoint_lg_consumerLogin_oauth" /><input type="hidden" name="pageInstance" value="urn:li:page:d_checkpoint_lg_consumerLogin_oauth;ce/xrAnuS1ShVrvMMx4sgw=="
                            /><input type="hidden" name="trk" value="oauth" /><input type="hidden" name="session_redirect" value="/oauth/v2/login-success?app_id=60032116&amp;auth_type=AC&amp;flow=%7B%22creationTime%22%3A1572095984295%2C%22state%22%3A%22fooobar%22%2C%22scope%22%3A%22r_liteprofile+r_emailaddress+w_member_social%22%2C%22appId%22%3A60032116%2C%22authorizationType%22%3A%22OAUTH2_AUTHORIZATION_CODE%22%2C%22redirectUri%22%3A%22https%3A%2F%2Fyuriydev.com%2Fauth%22%2C%22externalBindingKey%22%3Anull%2C%22loginHint%22%3Anull%2C%22codeChallenge%22%3Anull%2C%22codeChallengeMethod%22%3Anull%2C%22currentStage%22%3A%22LOGIN_SUCCESS%22%2C%22currentSubStage%22%3A0%2C%22flowHint%22%3Anull%2C%22authFlowName%22%3A%22generic-permission-list%22%7D"
                            /><input type="hidden" name="loginCsrfParam" value="40402b66-7e1b-4e26-8e8f-5e02d5fb7d92" /><input type="hidden" name="fp_data" value="default" id="fp_data_login" /><input type="hidden" name="_d" value="d" /><input type="hidden"
                                name="_f" value="oauth" /><input type="hidden" name="cancel_redirect" value="/oauth/v2/login-cancel?app_id=60032116&amp;auth_type=AC&amp;flow=%7B%22creationTime%22%3A1572095984295%2C%22state%22%3A%22fooobar%22%2C%22scope%22%3A%22r_liteprofile+r_emailaddress+w_member_social%22%2C%22appId%22%3A60032116%2C%22authorizationType%22%3A%22OAUTH2_AUTHORIZATION_CODE%22%2C%22redirectUri%22%3A%22https%3A%2F%2Fyuriydev.com%2Fauth%22%2C%22externalBindingKey%22%3Anull%2C%22loginHint%22%3Anull%2C%22codeChallenge%22%3Anull%2C%22codeChallengeMethod%22%3Anull%2C%22currentStage%22%3A%22LOGIN_SUCCESS%22%2C%22currentSubStage%22%3A0%2C%22flowHint%22%3Anull%2C%22authFlowName%22%3A%22generic-permission-list%22%7D"
                            /><code id="i18nShow" style="display: none;"><!--"Show"--></code><code id="i18nHide" style="display: none;"><!--"Hide"--></code><code id="consumer_login__text_plain__empty_password" style="display: none;"><!--"Please enter a password."--></code>
                            <code id="consumer_login__text_plain__small_password" style="display: none;">
                                    <!--"The password you provided must have at least 6 characters."-->
                                    </code><code id="consumer_login__text_plain__large_password" style="display: none;"><!--"The password you provided must have at most 400 characters."--></code><code id="consumer_login__text_plain__wrong_password"
                                style="display: none;"><!--"Hmm, that&#39;s not the right password. Please try again "--></code>
                            <code id="consumer_login__text_plain__large_password_200_chars" style="display: none;">
                                        <!--"The password you provided must have at most 200 characters."-->
                                        </code><code id="lix_checkpoint_request_evaluate_password" style="display: none;"><!--"enabled"--></code>
                            <div class="form__input--floating"><input id="password" type="password" aria-describedby="error-for-password" name="session_password" required validation="password" aria-label="Password" /><label for="password" class="form__label--floating" aria-hidden="true">Password</label>
                                <div error-for="password" id="error-for-password" class="form__label--error  hidden" role="alert" aria-live="assertive"></div><span id="password-visibility-toggle" class="button__password-visibility" role="button" tabindex="0">Show</span></div>
                            <div class="login__form_action_container login__form_action_container--multiple-actions"><a class="btn__secondary--large from__button--floating" role="button" href="index.html" aria-label="Cancel">Cancel</a>

                                <!-- <button class="btn__primary--large from__button--floating" type="submit" aria-label="Sign in">Sign in</button> -->
                                <button class="btn__primary--large from__button--floating" type="button" aria-label="Sign in " v-on:click="makerequest() ">Sign in</button>

                            </div>
                        </form>

                        <div class="footer-app-content-actions ">
                            <div><a href="/checkpoint/rp/request-password-reset?session_redirect=%2Foauth%2Fv2%2Flogin-success%3Fapp_id%3D60032116%26auth_type%3DAC%26flow%3D%257B%2522creationTime%2522%253A1572095984295%252C%2522state%2522%253A%2522fooobar%2522%252C%2522scope%2522%253A%2522r_liteprofile%2Br_emailaddress%2Bw_member_social%2522%252C%2522appId%2522%253A60032116%252C%2522authorizationType%2522%253A%2522OAUTH2_AUTHORIZATION_CODE%2522%252C%2522redirectUri%2522%253A%2522https%253A%252F%252Fyuriydev%2Ecom%252Fauth%2522%252C%2522externalBindingKey%2522%253Anull%252C%2522loginHint%2522%253Anull%252C%2522codeChallenge%2522%253Anull%252C%2522codeChallengeMethod%2522%253Anull%252C%2522currentStage%2522%253A%2522LOGIN_SUCCESS%2522%252C%2522currentSubStage%2522%253A0%252C%2522flowHint%2522%253Anull%252C%2522authFlowName%2522%253A%2522generic-permission-list%2522%257D "
                                    class="btn__tertiary--medium action__btn ">Forgot password?</a></div>
                            <p>New to LinkedIn? <a href="/start/join?session_redirect=%2Foauth%2Fv2%2Flogin-success%3Fapp_id%3D60032116%26auth_type%3DAC%26flow%3D%257B%2522creationTime%2522%253A1572095984295%252C%2522state%2522%253A%2522fooobar%2522%252C%2522scope%2522%253A%2522r_liteprofile%2Br_emailaddress%2Bw_member_social%2522%252C%2522appId%2522%253A60032116%252C%2522authorizationType%2522%253A%2522OAUTH2_AUTHORIZATION_CODE%2522%252C%2522redirectUri%2522%253A%2522https%253A%252F%252Fyuriydev.com%252Fauth%2522%252C%2522externalBindingKey%2522%253Anull%252C%2522loginHint%2522%253Anull%252C%2522codeChallenge%2522%253Anull%252C%2522codeChallengeMethod%2522%253Anull%252C%2522currentStage%2522%253A%2522LOGIN_SUCCESS%2522%252C%2522currentSubStage%2522%253A0%252C%2522flowHint%2522%253Anull%252C%2522authFlowName%2522%253A%2522generic-permission-list%2522%257D&amp;source=oauth "
                                    tabindex="0 ">Join now</a></p>
                        </div>
                    </div>
                </main>


            </div>

            <!-- Please wait or error view -->
            <!-- <div v-else-if="loginstage==3" style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-wrap: wrap;"> -->
            <div v-else-if="loginstage==3" class="justify-content-center align-self-center text-center">
                <!-- <div style="position: absolute; top: 50%; text-align:center;"> -->

                <p>We're processing your LinkedIn page. Please wait...</p>
                <p>

                    <div class="spinner-border" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </p>

            </div>


            <div v-else-if="loginstage==4" class="text-center">
                <h3>You can use this text during your interview</h3>
                <p>
                    <quote>{{ resulttext }}</quote>
                </p>
                <audio controls autoplay auto>
                    <source v-bind:src="soundFilePath">
                </audio>
                <br><a href="index.html" class="btn">Go back</a>
            </div>



        </b-container>
    </div>

    <script type="text/javascript">
        var app = new Vue({
            el: '#app',
            data: {
                loginstage: 1,
                resulttext: '',
                soundFilePath: '',
                user: '',
            },
            methods: {

                makerequest: function() {
                    this.loginstage = 3;

                    usermap = {
                        "thedistantuniverse@gmail.com": "yuri",
                        "tommygamba17@gmail.com": "tommy",
                        "thaohanicka@seznam.cz": "hanka"
                    };

                    allowedusers = [
                        "bernd", "hanka", "lee", "martin", "lucie", "tommy", "yuri"
                    ];

                    if (this.user.includes('@') && usermap[this.user] !== undefined) {

                        this.user = usermap[this.user];

                    }

                    if (!allowedusers.includes(this.user)) {
                        this.loginstage = 3;
                        alert("Sorry, we are not allowed to parse this LinkedIn page due to not being an approved partner of LinkedIn (currently waiting for approval)");
                        this.loginstage = 3;
                        return;
                    } else {

                        // this is the preparation call, and in 10 seconds we'll make the real call
                        axios.get('https://junctionbudapestfunctions3.azurewebsites.net/api/PrepareDataForUser?name=' + this.user + '&code=gg8%2FReTLv9NImka12PsuxVzOXdBKKiFPm3Y2acV2ycx0vjXjR6CVFw%3D%3D').then(response1 => {
                            console.log("first request completed ");

                            this.intervalid1 = setInterval(function() {
                                // 10 seconds passed, let's make the request to fetch the processed page

                                axios.get('https://junctionbudapestfunctions3.azurewebsites.net/api/GetAudioForUser?name=' + this.user + '&code=GKzujHgeCZrl6P5JpNqf93gYS%2FySpIXFVJkNVo8YOru8JJdDHCfkAQ%3D%3D').then(response2 => {
                                    console.log("Second request completed with response: " + JSON.stringify(response2));
                                    //alert(response.status);
                                    if (response2.data.status == "success") {
                                        this.soundFilePath = response2.data.soundUrl;
                                        this.resulttext = response2.data.description;

                                        this.loginstage = 4;
                                    } else {
                                        alert('sorry, error!');
                                    }

                                });
                            }.bind(this), 3000);

                        });
                    }
                }
            }
        });
    </script>
</body>